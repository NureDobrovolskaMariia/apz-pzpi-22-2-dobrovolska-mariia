<!DOCTYPE html>
<html lang="uk"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—ó —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ–Ω–∫—É–±–∞—Ç–æ—Ä–æ–º</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <span class="logo">üê£</span> Chicken Incubator
        </div>
        <ul class="navbar-nav">
            <li><a href="/html/dashboard.html" class="nav-link">–ì–æ–ª–æ–≤–Ω–∞</a></li>
            <li><a href="/html/devices.html" class="nav-link">–ü—Ä–∏—Å—Ç—Ä–æ—ó</a></li>
            <li><a href="/html/alerts.html" class="nav-link active">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</a></li>
            <li><a href="/html/sensor-data.html" class="nav-link">–î–∞–Ω—ñ —Å–µ–Ω—Å–æ—Ä—ñ–≤</a></li>
            <li id="adminPanelLink" style="display: none;"><a href="/html/admin.html" class="nav-link">–ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a></li>
        </ul>
        <div class="navbar-user">
            <div class="dropdown">
                <span id="userDropdownTrigger" class="dropdown-trigger">
                    –í—ñ—Ç–∞—î–º–æ, <span id="userNameNav"></span> (<span id="userRoleNav"></span>)
                </span>
                <div class="dropdown-content" id="userDropdown">
                    <a href="/html/profile.html">–ü—Ä–æ—Ñ—ñ–ª—å</a>
                    <a href="#" id="logoutBtnDropdown">–í–∏—Ö—ñ–¥</a>
                </div>
            </div>
            <button id="logoutBtn" class="btn btn-sm secondary-btn hide-on-mobile" style="display: none;">–í–∏—Ö—ñ–¥</button>
        </div>
    </nav>

    <div class="container">
        <div class="content-header">
            <h1>–ú–æ—ó —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h1>
        </div>

        <div class="tab-navigation">
            <button class="tab-link active" data-tab="all-alerts">–í—Å—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
            <button class="tab-link" data-tab="critical-alerts">–ö—Ä–∏—Ç–∏—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
            <button class="tab-link" data-tab="alert-stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="tab-link" data-tab="create-alert">–°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—Ä—É—á–Ω—É</button>
        </div>

        <div id="all-alertsTab" class="tab-content active">
            <div class="card">
                <h2>–°–ø–∏—Å–æ–∫ —Å–ø–æ–≤—ñ—â–µ–Ω—å</h2>
                <div class="table-filters">
                    <label for="alertStatusFilter">–°—Ç–∞—Ç—É—Å:</label>
                    <select id="alertStatusFilter">
                        <option value="">–í—Å—ñ</option>
                        <option value="false">–ù–µ –≤–∏—Ä—ñ—à–µ–Ω–æ</option>
                        <option value="true">–í–∏—Ä—ñ—à–µ–Ω–æ</option>
                    </select>
                    <label for="alertSeverityFilter">–†—ñ–≤–µ–Ω—å:</label>
                    <select id="alertSeverityFilter">
                        <option value="">–í—Å—ñ</option>
                        <option value="LOW">–ù–∏–∑—å–∫–∏–π</option>
                        <option value="MEDIUM">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
                        <option value="HIGH">–í–∏—Å–æ–∫–∏–π</option>
                        <option value="CRITICAL">–ö—Ä–∏—Ç–∏—á–Ω–∏–π</option>
                    </select>
                    <label for="alertTypeFilter">–¢–∏–ø:</label>
                    <select id="alertTypeFilter">
                        <option value="">–í—Å—ñ</option>
                        <option value="TEMPERATURE">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="HUMIDITY">–í–æ–ª–æ–≥—ñ—Å—Ç—å</option>
                        <option value="DEVICE_OFFLINE">–ü—Ä–∏—Å—Ç—Ä—ñ–π –æ—Ñ–ª–∞–π–Ω</option>
                        <option value="SENSOR_ERROR">–ü–æ–º–∏–ª–∫–∞ —Å–µ–Ω—Å–æ—Ä–∞</option>
                    </select>
                    <label for="alertDeviceIdFilter">–ü—Ä–∏—Å—Ç—Ä—ñ–π:</label>
                    <select id="alertDeviceIdFilter">
                        <option value="">–í—Å—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó</option>
                    </select>
                </div>
                <div class="mb-10" style="text-align: left;">
                    <button class="btn secondary-btn btn-sm" id="resolveSelectedAlertsBtn">–í–∏—Ä—ñ—à–∏—Ç–∏ –æ–±—Ä–∞–Ω—ñ</button>
                    <button class="btn secondary-btn btn-sm" id="cleanupResolvedAlertsBtn" style="margin-left: 10px;">–û—á–∏—Å—Ç–∏—Ç–∏ –≤–∏—Ä—ñ—à–µ–Ω—ñ (—Å—Ç–∞—Ä—à—ñ 30 –¥–Ω—ñ–≤)</button>
                    <div id="alertListMessage" class="message-area mt-10"></div>
                </div>
                <table class="device-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAllAlerts"></th>
                            <th>–ü—Ä–∏—Å—Ç—Ä—ñ–π</th>
                            <th>–¢–∏–ø</th>
                            <th>–†—ñ–≤–µ–Ω—å</th>
                            <th>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</th>
                            <th>–ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è</th>
                            <th>–ß–∞—Å</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="alertsTableBody">
                        <tr><td colspan="9">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å...</td></tr>
                    </tbody>
                </table>
                <div class="pagination-controls">
                    <button id="prevAlertsPage" class="btn btn-sm secondary-btn">–ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
                    <span id="currentAlertsPage">–°—Ç–æ—Ä—ñ–Ω–∫–∞ 1</span>
                    <button id="nextAlertsPage" class="btn btn-sm secondary-btn">–ù–∞—Å—Ç—É–ø–Ω–∞</button>
                </div>
            </div>
        </div>

        <div id="critical-alertsTab" class="tab-content">
            <div class="card">
                <h2>–ö—Ä–∏—Ç–∏—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h2>
                <div id="criticalAlertsList" class="alert-list">
                    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å...</p>
                </div>
            </div>
        </div>

        <div id="alert-statsTab" class="tab-content">
            <div class="card">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å</h2>
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>–í—Å—å–æ–≥–æ —Å–ø–æ–≤—ñ—â–µ–Ω—å</h3>
                        <p id="totalAlertsCount">0</p>
                    </div>
                    <div class="summary-card">
                        <h3>–ù–µ–≤–∏—Ä—ñ—à–µ–Ω–∏—Ö</h3>
                        <p id="unresolvedAlertsStats">0</p>
                    </div>
                    <div class="summary-card">
                        <h3>–í–∏—Ä—ñ—à–µ–Ω–∏—Ö</h3>
                        <p id="resolvedAlertsStats">0</p>
                    </div>
                    <div class="summary-card">
                        <h3>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∏—Ö</h3>
                        <p id="tempAlertsStats">0</p>
                    </div>
                    <div class="summary-card">
                        <h3>–í–æ–ª–æ–≥—ñ—Å–Ω–∏—Ö</h3>
                        <p id="humidityAlertsStats">0</p>
                    </div>
                    <div class="summary-card">
                        <h3>–ü—Ä–∏—Å—Ç—Ä–æ—ó –æ—Ñ–ª–∞–π–Ω</h3>
                        <p id="offlineAlertsStats">0</p>
                    </div>
                </div>
                <h3 class="mt-20">–ó–∞ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏</h3>
                <div id="alertsByDeviceStats" class="alert-list">
                    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏...</p>
                </div>
                <h3 class="mt-20">–©–æ–¥–µ–Ω–Ω–∏–π —Ç—Ä–µ–Ω–¥</h3>
                <div class="chart-canvas-wrapper">
                    <canvas id="dailyAlertsChart"></canvas>
                </div>
            </div>
        </div>

        <div id="create-alertTab" class="tab-content">
            <div class="card">
                <h2>–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É</h2>
                <form id="createManualAlertForm">
                    <div class="input-group">
                        <label for="manualAlertDeviceId">–ü—Ä–∏—Å—Ç—Ä—ñ–π:</label>
                        <select id="manualAlertDeviceId" required>
                            <option value="">-- –û–±–µ—Ä—ñ—Ç—å –ø—Ä–∏—Å—Ç—Ä—ñ–π --</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="manualAlertType">–¢–∏–ø —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:</label>
                        <select id="manualAlertType" required>
                            <option value="">-- –û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø --</option>
                            <option value="TEMPERATURE">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option>
                            <option value="HUMIDITY">–í–æ–ª–æ–≥—ñ—Å—Ç—å</option>
                            <option value="DEVICE_OFFLINE">–ü—Ä–∏—Å—Ç—Ä—ñ–π –æ—Ñ–ª–∞–π–Ω</option>
                            <option value="SENSOR_ERROR">–ü–æ–º–∏–ª–∫–∞ —Å–µ–Ω—Å–æ—Ä–∞</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="manualAlertSeverity">–†—ñ–≤–µ–Ω—å:</label>
                        <select id="manualAlertSeverity">
                            <option value="LOW">–ù–∏–∑—å–∫–∏–π</option>
                            <option value="MEDIUM" selected>–°–µ—Ä–µ–¥–Ω—ñ–π</option>
                            <option value="HIGH">–í–∏—Å–æ–∫–∏–π</option>
                            <option value="CRITICAL">–ö—Ä–∏—Ç–∏—á–Ω–∏–π</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="manualAlertValue">–ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è (–¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏/–≤–æ–ª–æ–≥–æ—Å—Ç—ñ):</label>
                        <input type="number" step="0.1" id="manualAlertValue" placeholder="–ó–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º –¥–ª—è —ñ–Ω—à–∏—Ö —Ç–∏–ø—ñ–≤">
                    </div>
                    <div class="input-group">
                        <label for="manualAlertMessage">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:</label>
                        <textarea id="manualAlertMessage" rows="3" required placeholder="–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è"></textarea>
                    </div>
                    <button type="submit" class="btn primary-btn">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
                </form>
                <div id="manualAlertMessageDiv" class="message-area mt-10"></div>
            </div>
        </div>

    </div>

    <script src="/js/alerts.js"></script>
</body>
</html>
